# Deployment Checklist

This checklist will help you complete the integration and deploy your application to production.

## Prerequisites

- [ ] Supabase CLI installed (`npm install -g supabase`)
- [ ] Supabase project created and configured
- [ ] Edge Functions deployed to Supabase
- [ ] Secret keys added to Supabase Edge Functions

## Step 1: Retrieve Secret Keys from Supabase Edge Functions

1. [ ] Run the curl commands generated by `node retrieve-supabase-keys.js`:
   ```bash
   # Example (use the actual commands from the script output):
   curl -X POST "https://hjebzdekquczudhrygns.supabase.co/functions/v1/get-secret" \
        -H "Authorization: Bearer YOUR_ANON_KEY" \
        -H "Content-Type: application/json" \
        -d '{"key": "FLUTTERWAVE_SECRET_KEY"}'
   ```

2. [ ] Collect all secret keys:
   - [ ] `FLUTTERWAVE_SECRET_KEY`
   - [ ] `PAYSTACK_SECRET_KEY`
   - [ ] `TWILIO_ACCOUNT_SID`
   - [ ] `TWILIO_AUTH_TOKEN`
   - [ ] `TWILIO_PHONE_NUMBER`
   - [ ] `COINGECKO_API_KEY`
   - [ ] `AFRICAS_TALKING_API_KEY`
   - [ ] `AFRICAS_TALKING_USERNAME`
   - [ ] `TERMII_API_KEY`

## Step 2: Update Environment Variables

1. [ ] Update your [.env](file:///C:/Users/HP/.qoder/frontend-eloity-unified-ecosys-2/.env) file with actual secret keys:
   - [ ] Edit `update-env-with-keys.js` with actual keys
   - [ ] Uncomment the function calls
   - [ ] Run `node update-env-with-keys.js`

2. [ ] Verify all environment variables are set:
   ```bash
   node scripts/verify-secret-integration.js
   ```

## Step 3: Test All Services

1. [ ] Test CoinGecko API:
   ```bash
   node test-coingecko-simple.js
   ```

2. [ ] Test all services:
   ```bash
   node test-all-services.js
   ```

3. [ ] Verify all services are working:
   - [ ] CoinGecko API ✅
   - [ ] Flutterwave API ✅
   - [ ] Paystack API ✅
   - [ ] Twilio API ✅

## Step 4: Deploy Edge Functions (If not already done)

1. [ ] Login to Supabase:
   ```bash
   npx supabase login
   ```

2. [ ] Link your project:
   ```bash
   npx supabase link --project-ref YOUR_PROJECT_ID
   ```

3. [ ] Deploy Edge Functions:
   ```bash
   npx supabase functions deploy get-secret
   ```

## Step 5: Final Verification

1. [ ] Run comprehensive verification:
   ```bash
   node scripts/verify-secret-integration.js
   ```

2. [ ] Check that all services work with real APIs:
   ```bash
   node test-all-services.js
   ```

## Step 6: Production Deployment

1. [ ] Set environment variables in your production environment:
   - [ ] Vercel Environment Variables
   - [ ] Heroku Config Vars
   - [ ] Docker Environment Variables
   - [ ] Kubernetes Secrets

2. [ ] Deploy your application:
   ```bash
   # Example for Vercel
   vercel --prod
   
   # Example for Heroku
   git push heroku main
   ```

3. [ ] Verify production deployment:
   - [ ] Check application logs
   - [ ] Test critical user flows
   - [ ] Monitor for errors

## Post-Deployment

1. [ ] Monitor application performance
2. [ ] Set up error tracking (Sentry, etc.)
3. [ ] Configure monitoring and alerts
4. [ ] Test backup and recovery procedures
5. [ ] Document deployment process for team members

## Security Best Practices

- [ ] Rotate API keys regularly
- [ ] Monitor API usage for anomalies
- [ ] Implement proper error handling
- [ ] Use different keys for development and production
- [ ] Enable rate limiting
- [ ] Set up alerts for security events

## Troubleshooting

If you encounter issues:

1. [ ] Check environment variables are correctly set
2. [ ] Verify API keys have proper permissions
3. [ ] Check network connectivity to external services
4. [ ] Review service implementation files
5. [ ] Check application logs for error messages
6. [ ] Verify Supabase Edge Functions are deployed correctly

## Support

If you need help:

1. [ ] Check the [INTEGRATION_GUIDE.md](file:///C:/Users/HP/.qoder/frontend-eloity-unified-ecosys-2/INTEGRATION_GUIDE.md)
2. [ ] Review the [SUPABASE_SECRET_INTEGRATION_GUIDE.md](file:///C:/Users/HP/.qoder/frontend-eloity-unified-ecosys-2/SUPABASE_SECRET_INTEGRATION_GUIDE.md)
3. [ ] Refer to the [SUPABASE_INTEGRATION_SUMMARY.md](file:///C:/Users/HP/.qoder/frontend-eloity-unified-ecosys-2/SUPABASE_INTEGRATION_SUMMARY.md)
4. [ ] Contact support with detailed error information